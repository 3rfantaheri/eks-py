# Pulumi.sample.yaml
config:
  aws:region: us-west-2
  eks-cluster:cluster_name: my-eks-cluster
  eks-cluster:environment: dev
  eks-cluster:public_access: true
  eks-cluster:private_access: true
  eks-cluster:public_access_cidrs:
    - 0.0.0.0/0
  eks-cluster:trusted_cidrs:
    - 10.100.0.0/16
  eks-cluster:vpc_cidr: 10.100.0.0/16
  eks-cluster:max_azs: 2
  eks-cluster:node_groups:
    - name: general
      instance_type: t3.medium
      architecture: x86_64
      ami_family: al2
      desired_capacity: 2
      min_capacity: 1
      max_capacity: 4
      subnet_azs: ["us-west-2a","us-west-2b"]  
      labels:
        workload: general
    - name: batch-arm
      instance_type: c7g.large
      architecture: arm64
      ami_family: al2
      desired_capacity: 1
      min_capacity: 1
      max_capacity: 3
      taints:
        - key: workload
          value: batch
          effect: NoSchedule
      subnet_azs: ["us-west-2a"]
      labels:
        workload: batch
        arch: arm64
  eks-cluster:enable_efs: true
  eks-cluster:enable_ebs: true
  eks-cluster:enable_ingress: true
  eks-cluster:enable_prometheus: true
  eks-cluster:ingress_nginx_values:
    controller:
      service:
        type: LoadBalancer
      replicaCount: 2
  eks-cluster:prometheus_stack_values:
    grafana:
      adminPassword: supersecret
      ingress:
        enabled: true
        hosts: ["grafana.example.com"]
        annotations:
          kubernetes.io/ingress.class: nginx
        path: /
